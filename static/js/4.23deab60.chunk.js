(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[4],{244:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),i=a(23),s=a(231),o=a(9),l=a(91),d=a(39),m=a(27),g=a(233),u=a(202),f=a(164),p=a(171),b=a(227),E=a(167),j=a(166),v=a(241),O=a(6),y=Object(f.a)((function(e){return Object(p.a)({root:{},avatar:{width:e.spacing(8),height:e.spacing(8),marginRight:e.spacing(1),boxSizing:"border-box"},button:{textTransform:"none"}})})),h=Object(O.a)((function(e){return Object(p.a)({badge:{right:-4,top:4,border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}})}))(b.a),x=function(e){var t=e.name,a=e.onClick,n=e.avatar,c=e.newMessagesCount,i=e.selected,s=y();return r.a.createElement(E.a,{onClick:a,className:s.root},r.a.createElement(j.a,{className:s.button},r.a.createElement(v.a,{className:s.avatar,alt:"Avatar",src:n||void 0,style:{border:i?"2px solid #0808f9":"none"}}),c?r.a.createElement(h,{badgeContent:c,color:"secondary",max:100},r.a.createElement("strong",{style:{color:i?"#0808f9":"#000"}},t)):t))},w=a(48),N=a(13),C=Object(N.a)(r.a.createElement("path",{d:"M20.47 5.63c.39.39.39 1.01 0 1.4L9.13 18.37c-.39.39-1.01.39-1.4 0l-4.2-4.2a.9839.9839 0 010-1.4c.39-.39 1.01-.39 1.4 0l3.5 3.5L19.07 5.63c.39-.39 1.01-.39 1.4 0zm-2.11-2.12l-9.93 9.93-2.79-2.79c-.78-.78-2.05-.78-2.83 0l-1.4 1.4c-.78.78-.78 2.05 0 2.83l5.6 5.6c.78.78 2.05.78 2.83 0L22.59 7.74c.78-.78.78-2.05 0-2.83l-1.4-1.4c-.79-.78-2.05-.78-2.83 0z"}),"DoneOutlineRounded"),D=a(29),L=Object(f.a)((function(e){return Object(p.a)({root:{display:"flex",marginBottom:e.spacing(1)},day:{justifyContent:"center",fontSize:"0.8rem",opacity:.7},textWrapper:{position:"relative",display:"flex",alignItems:"center",padding:e.spacing(1),paddingBottom:12,border:"1px solid #ccc",borderRadius:5},avatar:{width:e.spacing(3),height:e.spacing(3)},text:{marginLeft:"0.5rem",marginRight:"0.5rem"},meta:{position:"relative",display:"flex",alignItems:"center",bottom:-12},time:{fontSize:"0.6rem",marginRight:5}})})),k=function(e){var t=e.text,a=e.addedAt,n=e.recipientId,i=e.ownerId,s=e.viewed,o=e.newDay,d=L(),m=Object(c.d)(l.a),g=Object(c.d)(D.a),u=n===i,f=-1*(new Date).getTimezoneOffset(),p=+new Date(a).getHours()+f/60,b=new Date(a).toLocaleString("en-GB",{minute:"2-digit"});return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(E.a,{className:d.day},new Date(a).toLocaleString("en-GB",{day:"2-digit",month:"long",year:"numeric"})),r.a.createElement(E.a,{dense:!0,className:d.root,style:{justifyContent:u?"flex-start":"flex-end",paddingRight:u?12:0,paddingLeft:u?0:12}},r.a.createElement("div",{className:d.textWrapper},r.a.createElement(v.a,{src:u?m||void 0:g||void 0,className:d.avatar,style:{order:u?0:2}}),r.a.createElement("span",{className:d.text,style:{order:u?0:1}},t),r.a.createElement("span",{className:d.meta},r.a.createElement("span",{className:d.time},"".concat(p,":").concat(w.a.twoDigit(b))),!u&&r.a.createElement(C,{style:{fontSize:"0.8rem",color:s?"green":"red"}})))))},z=function(e){var t=e.messages,a=void 0===t?[]:t,n=(e.loading,Object(c.d)(d.d));return r.a.createElement(u.a,{style:{flexGrow:1}},a.map((function(e,t,a){var c=e.id,i=e.body,s=e.recipientId,o=e.addedAt,l=e.viewed,d=!0;return t>0&&(d=new Date(a[t-1].addedAt).toLocaleString("en-GB",{day:"2-digit"})<new Date(a[t].addedAt).toLocaleString("en-GB",{day:"2-digit"})),r.a.createElement(k,{key:c,ownerId:n,recipientId:s,text:w.a.unshielding(i),addedAt:o,viewed:l,newDay:d})})))},S=a(105),B=Object(f.a)((function(e){return Object(p.a)({dialogsWrapper:{marginBottom:e.spacing(2)},dialogs:{flexDirection:"column",padding:0,margin:0,"& li":{margin:0,padding:0}},messages:{height:"62vh",overflow:"auto"},input:{justifyContent:"flex-end"}})})),I=function(e){var t=e.dialogs,a=e.selectedDialog,i=e.loadingMessages,o=e.messages,d=e.sendHandler,m=e.getMessages,f=e.setNextPage,p=B(),b=Object(c.d)(l.g),E=Object(n.useRef)(null),j=null===E||void 0===E?void 0:E.current,v=Object(n.useCallback)((function(){j&&0===j.scrollTop&&f()}),[j,f]);return Object(n.useEffect)((function(){return j&&(j.addEventListener("scroll",v),i||j.scrollBy(0,"number"===typeof j.offsetHeight?j.offsetHeight:0)),function(){j&&j.removeEventListener("scroll",v)}}),[v,j,i,o,b]),r.a.createElement(g.a,{container:!0},r.a.createElement(g.a,{item:!0,container:!0,className:p.dialogsWrapper},r.a.createElement(g.a,{item:!0,sm:4},r.a.createElement(u.a,{className:p.dialogs},t.map((function(e){var t=e.id,n=e.userName,c=e.profile,i=e.photos.small,s=e.newMessagesCount;return r.a.createElement(x,{key:t,name:c&&c.fullName?c.fullName:n,avatar:i,onClick:function(){return m(t)},newMessagesCount:s,selected:a===t})})))),r.a.createElement(g.a,{item:!0,sm:8,className:p.messages,style:i?{display:"flex",justifyContent:"center",alignItems:"center"}:void 0,ref:E},i&&o&&!o.length?r.a.createElement(s.a,{size:80}):r.a.createElement(z,{messages:o,loading:i}))),a&&r.a.createElement(g.a,{item:!0,container:!0,className:p.input},r.a.createElement(S.a,{onClick:d,buttonName:"send"})))};t.default=function(){var e=Object(c.c)(),t=Object(c.d)(d.b),a=Object(c.d)(l.c),g=Object(c.d)(l.h),u=Object(c.d)(l.b),f=Object(c.d)(l.e),p=Object(c.d)(l.d);return Object(n.useEffect)((function(){var t=!1;return t||e(Object(m.l)()),function(){t=!0}}),[e]),Object(n.useEffect)((function(){return function(){e(Object(m.p)())}}),[e]),r.a.createElement(r.a.Fragment,null,!t&&r.a.createElement(i.a,{to:"/"}),a?r.a.createElement(s.a,{size:120}):r.a.createElement(I,{dialogs:u,messages:f||[],loadingMessages:p,sendHandler:function(t){return g?(e(Object(m.n)(g,t)),o.a.Success):o.a.Error},getMessages:function(t){e(Object(m.m)(t))},selectedDialog:g,setNextPage:function(){e(Object(m.o)())}}))}}}]);
//# sourceMappingURL=4.23deab60.chunk.js.map